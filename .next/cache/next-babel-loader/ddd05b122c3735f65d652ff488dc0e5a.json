{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ola\\\\Documents\\\\Lukasz\\\\projects\\\\next.js\\\\ec-ui\\\\components\\\\Week.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useState } from \"react\"; // import \"../styles/Week.scss\";\n\nimport moment from \"moment-timezone\";\nimport \"moment/locale/pl\";\nimport config from \"../config/config\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { useEffect } from \"react\";\nmoment.locale(\"pl\");\n\nconst Week = ({\n  weekArray,\n  weekSuccess,\n  meetingDuration,\n  url,\n  setUrl,\n  selectedDay,\n  setSelectedDay,\n  setSelectedTime,\n  hintsCheck,\n  setHintsCheck,\n  fetchWeek // savedMeeting,\n\n}) => {\n  const days = weekArray.map((item, index) => {\n    if (item.hours.length === 0) {\n      return __jsx(\"td\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }\n      }, __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }\n      }, moment.utc(item.day).date()));\n    } else {\n      return __jsx(\"td\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 9\n        }\n      }, __jsx(\"button\", {\n        type: \"button\",\n        className: `day${moment.utc(item.day).isSame(selectedDay) ? \" selected\" : \"\"}`,\n        onClick: () => {\n          setSelectedDay(moment.utc(item.day));\n          setSelectedTime(null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }\n      }, moment.utc(item.day).date()));\n    }\n  });\n  const months = [];\n\n  for (let item of weekArray) {\n    const month = moment.utc(item.day).format(\"MMMM\");\n    !months.includes(month) && months.push(month);\n  }\n\n  const monthsFormatted = months.length === 1 ? months[0] : `${months[0]} - ${months[1]}`;\n  const years = [];\n\n  for (let item of weekArray) {\n    const year = moment.utc(item.day).year();\n    !years.includes(year) && years.push(year);\n  }\n\n  const yearsFormatted = years.length === 1 ? years[0] : `${years[0]}/${years[1]}`;\n  const {\n    0: direction,\n    1: setDirection\n  } = useState(null);\n  const {\n    0: directionClass,\n    1: setDirectionClass\n  } = useState(null);\n  const {\n    0: showHint,\n    1: setShowHint\n  } = useState(false);\n\n  const handleArrowClick = e => {\n    if (!weekArray.length) {\n      return;\n    }\n\n    const {\n      direction\n    } = e.currentTarget.dataset;\n    setDirection(direction);\n    setShowHint(false);\n    setHintsCheck(false);\n\n    const getRandomDayFromWeek = () => {\n      let dayCandidate;\n\n      do {\n        dayCandidate = weekArray[Math.floor(Math.random() * 7)].day;\n      } while (dayCandidate === selectedDay);\n\n      return dayCandidate;\n    };\n\n    const params = {\n      meetingDuration,\n      date: getRandomDayFromWeek()\n    }; // if (savedMeeting) {\n    //   params.id = savedMeeting._id;\n    // }\n\n    setUrl(config.apiURL + \"week/\" + direction + \"/?\" + new URLSearchParams(params));\n  };\n\n  useEffect(() => {\n    if (hintsCheck && !weekSuccess) {\n      setShowHint(true);\n      setDirectionClass(direction);\n    }\n  }, [weekSuccess, hintsCheck, direction]);\n  useEffect(() => {\n    const handleClickAnywhere = () => {\n      setShowHint(false);\n      setHintsCheck(false);\n    };\n\n    window.addEventListener(\"click\", handleClickAnywhere);\n    return () => {\n      window.removeEventListener(\"click\", handleClickAnywhere);\n    };\n  }, [setShowHint, setHintsCheck]);\n\n  if (weekArray.length) {\n    return __jsx(\"div\", {\n      className: \"week-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 7\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }\n    }, \"Wybierz termin wizyty\", __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }), \"u\\u017Cyj strza\\u0142ek, aby sprawdzi\\u0107 inny tydzie\\u0144\"), __jsx(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, __jsx(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, __jsx(\"th\", {\n      colSpan: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, yearsFormatted)), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, __jsx(\"th\", {\n      colSpan: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, monthsFormatted)), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, \"Pn\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, \"Wt\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, \"\\u015Ar\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, \"Czw\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, \"Pt\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, \"Sb\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, \"Nd\"), __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    })), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, __jsx(\"button\", {\n      className: \"calendar-arrow\",\n      type: \"button\",\n      \"data-direction\": \"before\",\n      onClick: handleArrowClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-angle-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }))), days, __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, __jsx(\"button\", {\n      className: \"calendar-arrow\",\n      type: \"button\",\n      \"data-direction\": \"after\",\n      onClick: handleArrowClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-angle-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    })))))), __jsx(CSSTransition, {\n      in: showHint,\n      classNames: \"hint-transition\",\n      timeout: 250,\n      mountOnEnter: true,\n      unmountOnExit: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: `hint ${directionClass}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, \"Brak termin\\xF3w\", __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }), directionClass === \"before\" && \"we wcześniejszych\" || directionClass === \"after\" && \"w późniejszych\", \" \", \"tygodniach\"))));\n  } else {\n    return __jsx(\"div\", {\n      className: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, \"Trwa pobieranie danych\"), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, \"Kliknij\", \" \", __jsx(\"span\", {\n      type: \"button\",\n      onClick: () => fetchWeek(url),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, \"tutaj\"), \" \", \"aby spr\\xF3bowa\\u0107 ponownie\"));\n  }\n};\n\nexport default Week;","map":{"version":3,"sources":["C:/Users/Ola/Documents/Lukasz/projects/next.js/ec-ui/components/Week.js"],"names":["React","useState","moment","config","CSSTransition","useEffect","locale","Week","weekArray","weekSuccess","meetingDuration","url","setUrl","selectedDay","setSelectedDay","setSelectedTime","hintsCheck","setHintsCheck","fetchWeek","days","map","item","index","hours","length","utc","day","date","isSame","months","month","format","includes","push","monthsFormatted","years","year","yearsFormatted","direction","setDirection","directionClass","setDirectionClass","showHint","setShowHint","handleArrowClick","e","currentTarget","dataset","getRandomDayFromWeek","dayCandidate","Math","floor","random","params","apiURL","URLSearchParams","handleClickAnywhere","window","addEventListener","removeEventListener"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAO,kBAAP;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEAH,MAAM,CAACI,MAAP,CAAc,IAAd;;AAEA,MAAMC,IAAI,GAAG,CAAC;AACZC,EAAAA,SADY;AAEZC,EAAAA,WAFY;AAGZC,EAAAA,eAHY;AAIZC,EAAAA,GAJY;AAKZC,EAAAA,MALY;AAMZC,EAAAA,WANY;AAOZC,EAAAA,cAPY;AAQZC,EAAAA,eARY;AASZC,EAAAA,UATY;AAUZC,EAAAA,aAVY;AAWZC,EAAAA,SAXY,CAYZ;;AAZY,CAAD,KAaP;AACJ,QAAMC,IAAI,GAAGX,SAAS,CAACY,GAAV,CAAc,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC1C,QAAID,IAAI,CAACE,KAAL,CAAWC,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,aACE;AAAI,QAAA,GAAG,EAAEF,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOpB,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,EAAqBC,IAArB,EAAP,CADF,CADF;AAKD,KAND,MAMO;AACL,aACE;AAAI,QAAA,GAAG,EAAEL,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAG,MACVpB,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,EAAqBE,MAArB,CAA4Bf,WAA5B,IAA2C,WAA3C,GAAyD,EAC1D,EAJH;AAKE,QAAA,OAAO,EAAE,MAAM;AACbC,UAAAA,cAAc,CAACZ,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,CAAD,CAAd;AACAX,UAAAA,eAAe,CAAC,IAAD,CAAf;AACD,SARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUGb,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,EAAqBC,IAArB,EAVH,CADF,CADF;AAgBD;AACF,GAzBY,CAAb;AA2BA,QAAME,MAAM,GAAG,EAAf;;AAEA,OAAK,IAAIR,IAAT,IAAiBb,SAAjB,EAA4B;AAC1B,UAAMsB,KAAK,GAAG5B,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,EAAqBK,MAArB,CAA4B,MAA5B,CAAd;AACA,KAACF,MAAM,CAACG,QAAP,CAAgBF,KAAhB,CAAD,IAA2BD,MAAM,CAACI,IAAP,CAAYH,KAAZ,CAA3B;AACD;;AAED,QAAMI,eAAe,GACnBL,MAAM,CAACL,MAAP,KAAkB,CAAlB,GAAsBK,MAAM,CAAC,CAAD,CAA5B,GAAmC,GAAEA,MAAM,CAAC,CAAD,CAAI,MAAKA,MAAM,CAAC,CAAD,CAAI,EADhE;AAGA,QAAMM,KAAK,GAAG,EAAd;;AAEA,OAAK,IAAId,IAAT,IAAiBb,SAAjB,EAA4B;AAC1B,UAAM4B,IAAI,GAAGlC,MAAM,CAACuB,GAAP,CAAWJ,IAAI,CAACK,GAAhB,EAAqBU,IAArB,EAAb;AACA,KAACD,KAAK,CAACH,QAAN,CAAeI,IAAf,CAAD,IAAyBD,KAAK,CAACF,IAAN,CAAWG,IAAX,CAAzB;AACD;;AAED,QAAMC,cAAc,GAClBF,KAAK,CAACX,MAAN,KAAiB,CAAjB,GAAqBW,KAAK,CAAC,CAAD,CAA1B,GAAiC,GAAEA,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,EAD1D;AAGA,QAAM;AAAA,OAACG,SAAD;AAAA,OAAYC;AAAZ,MAA4BtC,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM;AAAA,OAACuC,cAAD;AAAA,OAAiBC;AAAjB,MAAsCxC,QAAQ,CAAC,IAAD,CAApD;AACA,QAAM;AAAA,OAACyC,QAAD;AAAA,OAAWC;AAAX,MAA0B1C,QAAQ,CAAC,KAAD,CAAxC;;AAEA,QAAM2C,gBAAgB,GAAIC,CAAD,IAAO;AAC9B,QAAI,CAACrC,SAAS,CAACgB,MAAf,EAAuB;AACrB;AACD;;AACD,UAAM;AAAEc,MAAAA;AAAF,QAAgBO,CAAC,CAACC,aAAF,CAAgBC,OAAtC;AACAR,IAAAA,YAAY,CAACD,SAAD,CAAZ;AACAK,IAAAA,WAAW,CAAC,KAAD,CAAX;AACA1B,IAAAA,aAAa,CAAC,KAAD,CAAb;;AAEA,UAAM+B,oBAAoB,GAAG,MAAM;AACjC,UAAIC,YAAJ;;AACA,SAAG;AACDA,QAAAA,YAAY,GAAGzC,SAAS,CAAC0C,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAAD,CAAT,CAAyC1B,GAAxD;AACD,OAFD,QAESuB,YAAY,KAAKpC,WAF1B;;AAGA,aAAOoC,YAAP;AACD,KAND;;AAQA,UAAMI,MAAM,GAAG;AACb3C,MAAAA,eADa;AAEbiB,MAAAA,IAAI,EAAEqB,oBAAoB;AAFb,KAAf,CAjB8B,CAsB9B;AACA;AACA;;AAEApC,IAAAA,MAAM,CACJT,MAAM,CAACmD,MAAP,GAAgB,OAAhB,GAA0BhB,SAA1B,GAAsC,IAAtC,GAA6C,IAAIiB,eAAJ,CAAoBF,MAApB,CADzC,CAAN;AAGD,GA7BD;;AA+BAhD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIW,UAAU,IAAI,CAACP,WAAnB,EAAgC;AAC9BkC,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAF,MAAAA,iBAAiB,CAACH,SAAD,CAAjB;AACD;AACF,GALQ,EAKN,CAAC7B,WAAD,EAAcO,UAAd,EAA0BsB,SAA1B,CALM,CAAT;AAOAjC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMmD,mBAAmB,GAAG,MAAM;AAChCb,MAAAA,WAAW,CAAC,KAAD,CAAX;AACA1B,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD,KAHD;;AAIAwC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCF,mBAAjC;AACA,WAAO,MAAM;AACXC,MAAAA,MAAM,CAACE,mBAAP,CAA2B,OAA3B,EAAoCH,mBAApC;AACD,KAFD;AAGD,GATQ,EASN,CAACb,WAAD,EAAc1B,aAAd,CATM,CAAT;;AAWA,MAAIT,SAAS,CAACgB,MAAd,EAAsB;AACpB,WACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,kEADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiBa,cAAjB,CADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiBH,eAAjB,CADF,CAJF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CAPF,EAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,gBADZ;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,wBAAe,QAHjB;AAIE,MAAA,OAAO,EAAEU,gBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME;AAAG,MAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADF,CADF,EAWGzB,IAXH,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,gBADZ;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,wBAAe,OAHjB;AAIE,MAAA,OAAO,EAAEyB,gBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADF,CAZF,CAlBF,CADF,CANF,EAkDE,MAAC,aAAD;AACE,MAAA,EAAE,EAAEF,QADN;AAEE,MAAA,UAAU,EAAC,iBAFb;AAGE,MAAA,OAAO,EAAE,GAHX;AAIE,MAAA,YAAY,MAJd;AAKE,MAAA,aAAa,MALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE;AAAK,MAAA,SAAS,EAAG,QAAOF,cAAe,EAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGIA,cAAc,KAAK,QAAnB,IAA+B,mBAAhC,IACEA,cAAc,KAAK,OAAnB,IAA8B,gBAJnC,EAIsD,GAJtD,eADF,CAPF,CAlDF,CADF;AAsED,GAvED,MAuEO;AACL,WACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACU,GADV,EAEE;AAAM,MAAA,IAAI,EAAC,QAAX;AAAoB,MAAA,OAAO,EAAE,MAAMtB,SAAS,CAACP,GAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAIU,GAJV,mCAFF,CADF;AAYD;AACF,CAvMD;;AAwMA,eAAeJ,IAAf","sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\n// import \"../styles/Week.scss\";\r\nimport moment from \"moment-timezone\";\r\nimport \"moment/locale/pl\";\r\nimport config from \"../config/config\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { useEffect } from \"react\";\r\n\r\nmoment.locale(\"pl\");\r\n\r\nconst Week = ({\r\n  weekArray,\r\n  weekSuccess,\r\n  meetingDuration,\r\n  url,\r\n  setUrl,\r\n  selectedDay,\r\n  setSelectedDay,\r\n  setSelectedTime,\r\n  hintsCheck,\r\n  setHintsCheck,\r\n  fetchWeek,\r\n  // savedMeeting,\r\n}) => {\r\n  const days = weekArray.map((item, index) => {\r\n    if (item.hours.length === 0) {\r\n      return (\r\n        <td key={index}>\r\n          <span>{moment.utc(item.day).date()}</span>\r\n        </td>\r\n      );\r\n    } else {\r\n      return (\r\n        <td key={index}>\r\n          <button\r\n            type=\"button\"\r\n            className={`day${\r\n              moment.utc(item.day).isSame(selectedDay) ? \" selected\" : \"\"\r\n            }`}\r\n            onClick={() => {\r\n              setSelectedDay(moment.utc(item.day));\r\n              setSelectedTime(null);\r\n            }}\r\n          >\r\n            {moment.utc(item.day).date()}\r\n          </button>\r\n        </td>\r\n      );\r\n    }\r\n  });\r\n\r\n  const months = [];\r\n\r\n  for (let item of weekArray) {\r\n    const month = moment.utc(item.day).format(\"MMMM\");\r\n    !months.includes(month) && months.push(month);\r\n  }\r\n\r\n  const monthsFormatted =\r\n    months.length === 1 ? months[0] : `${months[0]} - ${months[1]}`;\r\n\r\n  const years = [];\r\n\r\n  for (let item of weekArray) {\r\n    const year = moment.utc(item.day).year();\r\n    !years.includes(year) && years.push(year);\r\n  }\r\n\r\n  const yearsFormatted =\r\n    years.length === 1 ? years[0] : `${years[0]}/${years[1]}`;\r\n\r\n  const [direction, setDirection] = useState(null);\r\n  const [directionClass, setDirectionClass] = useState(null);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  const handleArrowClick = (e) => {\r\n    if (!weekArray.length) {\r\n      return;\r\n    }\r\n    const { direction } = e.currentTarget.dataset;\r\n    setDirection(direction);\r\n    setShowHint(false);\r\n    setHintsCheck(false);\r\n\r\n    const getRandomDayFromWeek = () => {\r\n      let dayCandidate;\r\n      do {\r\n        dayCandidate = weekArray[Math.floor(Math.random() * 7)].day;\r\n      } while (dayCandidate === selectedDay);\r\n      return dayCandidate;\r\n    };\r\n\r\n    const params = {\r\n      meetingDuration,\r\n      date: getRandomDayFromWeek(),\r\n    };\r\n\r\n    // if (savedMeeting) {\r\n    //   params.id = savedMeeting._id;\r\n    // }\r\n\r\n    setUrl(\r\n      config.apiURL + \"week/\" + direction + \"/?\" + new URLSearchParams(params)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (hintsCheck && !weekSuccess) {\r\n      setShowHint(true);\r\n      setDirectionClass(direction);\r\n    }\r\n  }, [weekSuccess, hintsCheck, direction]);\r\n\r\n  useEffect(() => {\r\n    const handleClickAnywhere = () => {\r\n      setShowHint(false);\r\n      setHintsCheck(false);\r\n    };\r\n    window.addEventListener(\"click\", handleClickAnywhere);\r\n    return () => {\r\n      window.removeEventListener(\"click\", handleClickAnywhere);\r\n    };\r\n  }, [setShowHint, setHintsCheck]);\r\n\r\n  if (weekArray.length) {\r\n    return (\r\n      <div className=\"week-container\">\r\n        <h2>\r\n          Wybierz termin wizyty\r\n          <br />\r\n          użyj strzałek, aby sprawdzić inny tydzień\r\n        </h2>\r\n        <table>\r\n          <tbody>\r\n            <tr>\r\n              <th colSpan=\"9\">{yearsFormatted}</th>\r\n            </tr>\r\n            <tr>\r\n              <th colSpan=\"9\">{monthsFormatted}</th>\r\n            </tr>\r\n            <tr>\r\n              <th></th>\r\n              <th>Pn</th>\r\n              <th>Wt</th>\r\n              <th>Śr</th>\r\n              <th>Czw</th>\r\n              <th>Pt</th>\r\n              <th>Sb</th>\r\n              <th>Nd</th>\r\n              <th></th>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <button\r\n                  className=\"calendar-arrow\"\r\n                  type=\"button\"\r\n                  data-direction=\"before\"\r\n                  onClick={handleArrowClick}\r\n                >\r\n                  <i className=\"fas fa-angle-left\"></i>\r\n                </button>\r\n              </td>\r\n              {days}\r\n              <td>\r\n                <button\r\n                  className=\"calendar-arrow\"\r\n                  type=\"button\"\r\n                  data-direction=\"after\"\r\n                  onClick={handleArrowClick}\r\n                >\r\n                  <i className=\"fas fa-angle-right\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <CSSTransition\r\n          in={showHint}\r\n          classNames=\"hint-transition\"\r\n          timeout={250}\r\n          mountOnEnter\r\n          unmountOnExit\r\n        >\r\n          <div className={`hint ${directionClass}`}>\r\n            <p>\r\n              Brak terminów\r\n              <br />\r\n              {(directionClass === \"before\" && \"we wcześniejszych\") ||\r\n                (directionClass === \"after\" && \"w późniejszych\")}{\" \"}\r\n              tygodniach\r\n            </p>\r\n          </div>\r\n        </CSSTransition>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"loading\">\r\n        <h2>Trwa pobieranie danych</h2>\r\n        <p>\r\n          Kliknij{\" \"}\r\n          <span type=\"button\" onClick={() => fetchWeek(url)}>\r\n            tutaj\r\n          </span>{\" \"}\r\n          aby spróbować ponownie\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n};\r\nexport default Week;\r\n"]},"metadata":{},"sourceType":"module"}